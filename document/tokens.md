``` r
require(quanteda)
```

tokens
======

tokensは語や記号などを分割された状態で効率的に処理する**quanteda**の独自オブジェクト。tokensの作成・操作を行う関数は`tokens_*`と命名されている。

作成
----

``` r
# 分かち書きされている場合
load('data/data_corpus_asahi_2016_seg.RData') # Mecabで分かち書き済み
toks <- tokens(data_corpus_asahi_2016_seg, what = "fastestword", remove_punct = TRUE)

# 分かち書きされていない場合
load('data/data_corpus_asahi_2016.RData') 
toks <- tokens(data_corpus_asahi_2016, remove_punct = TRUE)
```

操作
----

``` r
# ひらがなを削除
toks <- tokens_remove(toks, '^[ぁ-ん]+$', valuetype = 'regex', padding = TRUE)

# KWICで用例を確認
head(kwic(toks, "トランプ"), 20)
```

    ##                                                        
    ##  [text592038, 306]             放言 続ける | トランプ |
    ##  [text592039, 367]          党 トップ 走る | トランプ |
    ##  [text592039, 426]             過激派 右翼 | トランプ |
    ##  [text592094, 292] 乏しい 実業 家 ドナルド | トランプ |
    ##  [text592094, 373]      下がる 逆に 上がる | トランプ |
    ##  [text592094, 411]                 影響 大 | トランプ |
    ##   [text592329, 45]          争い 不動産 王 | トランプ |
    ##   [text592329, 90]            不信 感 強い | トランプ |
    ##  [text592329, 115]                      続 | トランプ |
    ##  [text592329, 188]               カ月 過ぎ | トランプ |
    ##  [text592329, 216]                 禁止 叫 | トランプ |
    ##  [text592329, 254]               大 隔たる | トランプ |
    ##  [text592363, 823]            候補 座 争う | トランプ |
    ##  [text592402, 486]      首位 走る ドナルド | トランプ |
    ##   [text592457, 42]    人気 集める ドナルド | トランプ |
    ##   [text592457, 90]  早期 承認 訴え 国際 面 | トランプ |
    ##  [text592457, 373]               爆撃 主張 | トランプ |
    ##  [text592469, 293]     共和 党 大統領 候補 | トランプ |
    ##  [text592469, 358]                 強 批判 | トランプ |
    ##   [text592470, 51]      首位 走る ドナルド | トランプ |
    ##                           
    ##  氏 人気 衰え             
    ##  氏 メキシコ 移民         
    ##  氏 敵 戦                 
    ##  氏 支持 率               
    ##  氏 当選 可能性           
    ##  氏 に関する 話題 大統領  
    ##  氏 優位 立               
    ##  氏 心理                  
    ##  人気 週                  
    ##  人気 衰え 見             
    ##  氏 有力 政治家           
    ##  流 ポピュリズム 大衆 迎合
    ##  氏 イスラム教 徒 入国    
    ##  氏 イスラム教 徒         
    ##  氏 排外 主義 的          
    ##  氏 批判 随所             
    ##  氏 イスラム教 徒         
    ##  氏 イスラム教 徒         
    ##  氏 排外 主義             
    ##  氏 暗 批判

``` r
# KWICをより見やすく別のウィンドウで表示
View(head(kwic(toks, "トランプ"), 100))
```

``` r
# Nグラムの生成
toks_ngram <- tokens_ngrams(toks, n = 2)
head(toks_ngram[[1]], 20)
```

    ##  [1] "衆_院"     "院_議員"   "残り_年"   "年_近く"   "中_安倍"  
    ##  [6] "安倍_晋"   "晋_三"     "三_首相"   "衆_参"     "参_同日"  
    ## [11] "同日_選"   "衆_院"     "院_解散"   "憲法_改正" "含む_今夏"
    ## [16] "今夏_以降" "政権_運営" "同日_選"   "続く_三つ" "判断_材料"

分析
----

### 辞書分析

``` r
# 地理的辞書の読み込み (Watanabe 2017)
dict <- dictionary(file = 'extra/watanabe_country.yml')
head(dict)
```

    ## Dictionary object with 5 primary key entries and 3 nested levels.
    ## - AFRICA:
    ##   - EAST:
    ##     - BI:
    ##       - ブルンジ*, ブジュンブラ
    ##     - KM:
    ##       - コモロ*, モロニ
    ##     - DJ:
    ##       - ジブチ*
    ##     - ER:
    ##       - エリトリア*, アスマラ
    ##     - ET:
    ##       - エチオピア*, アディスアベバ
    ##     - KE:
    ##       - ケニア*, ナイロビ
    ##     - MG:
    ##       - ダガスカル*, アンタナナリボ
    ##     - MW:
    ##       - マラウイ*, リロングウェ
    ##     - MU:
    ##       - モーリシャン*, ポートルイス
    ##     - YT:
    ##       - マムズ*
    ##     - MZ:
    ##       - モザンビーク*, マプト
    ##     - RE:
    ##       - レユニオン*
    ##     - RW:
    ##       - ルワンダ*, キガリ
    ##     - SC:
    ##       - セーシェル*
    ##     - SO:
    ##       - ソマリア*, モガディシュ
    ##     - UG:
    ##       - ウガンダ*, カンパラ
    ##     - TZ:
    ##       - タンザニア*, ドドマ
    ##     - ZM:
    ##       - ザンビア*, ルサカ
    ##     - ZW:
    ##       - ジンバブエ*, ハラレ
    ##   - MIDDLE:
    ##     - AO:
    ##       - アンゴラ*, ルアンダ
    ##     - CM:
    ##       - カメルーン*, ヤウンデ
    ##     - CF:
    ##       - 中央アフリカ*, バンギ
    ##     - TD:
    ##       - チャド*, ンジャメナ
    ##     - CG:
    ##       - コンゴ共和国, コンゴ*, ブラザビル
    ##     - CD:
    ##       - コンゴ民主共和国, コンゴ*, キンシャサ
    ##     - GQ:
    ##       - 赤道ギニア*, マラボ
    ##     - GA:
    ##       - ガボン*, リーブルヴィル
    ##     - ST:
    ##       - サントメ・プリンシペ*, サントメ
    ##   - NORTH:
    ##     - DZ:
    ##       - アルジェリア*, アルジェ
    ##     - EG:
    ##       - エジプト*, カイロ
    ##     - LY:
    ##       - リビア*, トリポリ
    ##     - MA:
    ##       - モロッコ*, ラバト
    ##     - SD:
    ##       - スーダン*, ハルツーム
    ##     - SS:
    ##       - 南スーダン*, ジュバ
    ##     - TN:
    ##       - チュニジア*, チュニス
    ##     - EH:
    ##       - 西サハラ*, エルアイウン
    ##   - SOUTH:
    ##     - BW:
    ##       - ボツワナン*, ガボローネ
    ##     - LS:
    ##       - レソト*, マセル
    ##     - NA:
    ##       - ナミビア*, ウィントフック
    ##     - ZA:
    ##       - 南アフリカ*, ケープタウン, ヨハネスブルグ
    ##     - SZ:
    ##       - スワジランド*, ロバンバ, ムババネ
    ##   - WEST:
    ##     - BJ:
    ##       - ベナン*, ポルトノボ
    ##     - BF:
    ##       - ブルキナファソ*, ワガドゥグー
    ##     - CV:
    ##       - カーボベルデ*, プライア
    ##     - CI:
    ##       - コートジボワール*, ヤムスクロ, アビジャン
    ##     - GM:
    ##       - ガンビア*, バンジュール
    ##     - GH:
    ##       - ガーナ*, アクラ
    ##     - GN:
    ##       - ギニア*, コナクリ
    ##     - GW:
    ##       - ギニアビサウ*, ビサウ
    ##     - LR:
    ##       - リベリア*, モンロビア
    ##     - ML:
    ##       - マリ*, バマコ
    ##     - MR:
    ##       - モーリタニア*, ヌアクショット
    ##     - NE:
    ##       - ニジェール*, ニアメ
    ##     - NG:
    ##       - ナイジェリア*, アブジャ
    ##     - SH:
    ##       - セントヘレナ**, ジェームズタウン
    ##     - SN:
    ##       - セネガル*, ダカール
    ##     - SL:
    ##       - シエラレオネ*, フリータウン
    ##     - TG:
    ##       - トーゴ*, ロメ
    ## - AMERICA:
    ##   - CARIB:
    ##     - AI:
    ##       - アンギラ*, バレー
    ##     - AG:
    ##       - アンティグア・バーブーダ*
    ##     - AW:
    ##       - アルバ*, オラニエスタッド
    ##     - BS:
    ##       - バハマ*, ナッソー
    ##     - BB:
    ##       - バルバドス*, ブリッジタウン
    ##     - BQ:
    ##       - ボネア*, クラレンダイク
    ##     - VG:
    ##       - 英領ヴァージン諸島*, 英領バージン諸島*, ロードタウン
    ##     - KY:
    ##       - ケイマン諸島*
    ##     - CU:
    ##       - キューバ*, ハバナ
    ##     - CW:
    ##       - キュラソー*, ウィレムスタット
    ##     - DO:
    ##       - ドミニカ国*, ロゾー
    ##     - DM:
    ##       - ドミニカ共和国*, サントドミンゴ
    ##     - GD:
    ##       - グレナダ*, セントジョージズ
    ##     - GP:
    ##       - グアドループ, グアドループーン*
    ##     - HT:
    ##       - ハイチ*, ポルトープランス
    ##     - JM:
    ##       - ジャマイカ*, キングストン
    ##     - MQ:
    ##       - マルティニーク*
    ##     - MS:
    ##       - モントセラト*, ブレイズ
    ##     - PR:
    ##       - プエルトリコ*, サンフアン
    ##     - BL:
    ##       - サン・バルテルミー*, グスタビア
    ##     - KN:
    ##       - セントクリストファー・ネイビス*, バセテール
    ##     - LC:
    ##       - セントルシア*, カストリーズ
    ##     - MF:
    ##       - セント・マーチン*, マリゴ
    ##     - VC:
    ##       - セントビンセント・グレナディーン*, キングスタウン
    ##     - SX:
    ##       - シント・マールテン*, フィリップスブルフ
    ##     - TT:
    ##       - トリニダード・トバゴ*, ポートオブスペイン
    ##     - TC:
    ##       - タークス・カイコス*, コックバーンタウン
    ##     - VI:
    ##       - 米領ヴァージン諸島*, 米領バージン諸島*, シャーロットアマリエ
    ##   - CENTER:
    ##     - BZ:
    ##       - ベリーズ*, ベルモパン
    ##     - CR:
    ##       - コスタリカ*, サンホセ
    ##     - SV:
    ##       - エルサルバドル*, サルバドール*, サンサルバドル, サンサルバドール
    ##     - GT:
    ##       - グアテマラ*, グアテマラシティ
    ##     - HN:
    ##       - ホンジュラス*, テグシガルパ
    ##     - MX:
    ##       - メキシコ*, メキシコシティ
    ##     - NI:
    ##       - ニカラグア*, マナグア
    ##     - PA:
    ##       - パナマ*, パナマ市
    ##   - SOUTH:
    ##     - AR:
    ##       - アルゼンチン*, ブエノスアイレス
    ##     - BO:
    ##       - ボリビア*, スクレ
    ##     - BR:
    ##       - ブラジル*, サンパウロ, リオ
    ##     - CL:
    ##       - チリ*, サンティアゴ
    ##     - CO:
    ##       - コロンビア*, ボゴタ
    ##     - EC:
    ##       - エクアドル*, quito
    ##     - FK:
    ##       - フォークランド諸島*
    ##     - GF:
    ##       - 仏領ギアナ*
    ##     - GY:
    ##       - ガイアナ*
    ##     - PY:
    ##       - パラグアイ*, アスンシオン
    ##     - PE:
    ##       - ペルー*, リマ
    ##     - SR:
    ##       - スリナム*, パラマリボ
    ##     - UY:
    ##       - ウルグアイ*, モンテビデオ
    ##     - VE:
    ##       - ベネズエラ*, カラカス
    ##   - NORTH:
    ##     - BM:
    ##       - バミューダ*
    ##     - CA:
    ##       - カナダ*, オタワ, トロント, ケベック
    ##     - GL:
    ##       - グリーンランド*, ヌーク
    ##     - PM:
    ##       - サンピエール・ミクロン島*, サンピエール, ミクロン
    ##     - US:
    ##       - 米国*, アメリカ*, ワシントン, ニューヨーク
    ## - ASIA:
    ##   - CENTER:
    ##     - KZ:
    ##       - カザフスタン*, カザフ*, アスタナ
    ##     - KG:
    ##       - キルギスタン*, キルギス*, ビシュケク
    ##     - TJ:
    ##       - タジキスタン*, タジック*, ドゥシャンベ
    ##     - TM:
    ##       - トルクメニスタン*, トルクメン*, アシャバード
    ##     - UZ:
    ##       - ウズベキスタン*, ウズベク*, タシケント
    ##   - EAST:
    ##     - CN:
    ##       - 中華人民共和国*, 中国*, 北京, 上海
    ##     - TW:
    ##       - 中華民国*, 台湾*, 台北
    ##     - HK:
    ##       - 香港*
    ##     - MO:
    ##       - マカオ*
    ##     - KP:
    ##       - 朝鮮民主主義人民共和国*, 北朝鮮*, 平壌
    ##     - JP:
    ##       - 日本*, 東京
    ##     - MN:
    ##       - モンゴル*, ウランバートル
    ##     - KR:
    ##       - 大韓民国*, 韓国, ソウル
    ##   - SOUTH:
    ##     - AF:
    ##       - アフガニスタン*, アフガン, カブール
    ##     - BD:
    ##       - バングラデシュ*, ダッカ, ダッカ
    ##     - BT:
    ##       - ブータン*, ティンプー
    ##     - IN:
    ##       - インド*, ムンバイ, ニューデリー
    ##     - IR:
    ##       - イラン*, テヘラン
    ##     - MV:
    ##       - モルディブ*
    ##     - NP:
    ##       - ネパール*, カトマンズ
    ##     - PK:
    ##       - パキスタン*, イスラマバード
    ##     - LK:
    ##       - スリランカ*, コロンボ
    ##   - SOUTH-EAST:
    ##     - BN:
    ##       - ブルネイ*
    ##     - KH:
    ##       - カンボジア*, プノンペン
    ##     - ID:
    ##       - インドネシア*, ジャカルタ
    ##     - LA:
    ##       - ラオス*, ビエンチャン
    ##     - MY:
    ##       - マレーシア*, クアラルンプール, プトラジャヤ
    ##     - MM:
    ##       - ミャンマー*, ビルマ*, ヤンゴン, ナイピドー
    ##     - PH:
    ##       - フィリピン*, マニラ
    ##     - SG:
    ##       - シンガポール*
    ##     - TH:
    ##       - タイ*, バンコク
    ##     - TL:
    ##       - 東ティモール*, ディリ
    ##     - VN:
    ##       - ベトナム*, ハノイ, ホーチミン市
    ##   - WEST:
    ##     - AM:
    ##       - アルメニア*, イェレヴァン
    ##     - AZ:
    ##       - アゼルバイジャン*, アゼリ*, バクー
    ##     - BH:
    ##       - バーレーン*, マナマ
    ##     - CY:
    ##       - キプロス*, ニコシア
    ##     - GE:
    ##       - グルジア*, トビリシ
    ##     - IQ:
    ##       - イラク*, バグダッド
    ##     - IL:
    ##       - イスラエル*, エルサレム
    ##     - JO:
    ##       - ヨルダン*, アンマン
    ##     - KW:
    ##       - クウェート*, クウェートシティ
    ##     - LB:
    ##       - レバノン*, ベイルート
    ##     - PS:
    ##       - パレスチナ*, ガザ市, ガザ, ウェストバンク
    ##     - OM:
    ##       - オマーン*, マスカット
    ##     - QA:
    ##       - カタール*, ドーハ
    ##     - SA:
    ##       - サウジアラビア*, リヤド
    ##     - SY:
    ##       - シリア*, ダマスカス
    ##     - TR:
    ##       - トルコ*, アンカラ, イスタンブール
    ##     - AE:
    ##       - アラブ首長国連邦*, ドバイ, アブダビ
    ##     - YE:
    ##       - イエメン*, サナア
    ## - EUROPE:
    ##   - EAST:
    ##     - BY:
    ##       - ベラルーシ*, ミンスク
    ##     - BG:
    ##       - ブルガリア*, ソフィア
    ##     - CZ:
    ##       - チェコ*, プラハ
    ##     - HU:
    ##       - ハンガリー*, ブダペスト
    ##     - PL:
    ##       - ポーランド*, ワルシャワ
    ##     - MD:
    ##       - モルドバ*, キシナウ
    ##     - RO:
    ##       - ルーマニア*, ブカレスト
    ##     - RU:
    ##       - ロシア*, モスクワ
    ##     - SK:
    ##       - スロバキア*, ブラチスラバ
    ##     - UA:
    ##       - ウクライナ*, キエフ
    ##   - NORTH:
    ##     - AX:
    ##       - オーランド諸島*, マリエハムン
    ##     - JE:
    ##       - チャンネル諸島*
    ##     - DK:
    ##       - デンマーク*, コペンハーゲン
    ##     - EE:
    ##       - エストニア*, タリン
    ##     - FO:
    ##       - フェロー諸島*, トルシャン
    ##     - FI:
    ##       - フィンランド*, ヘルシンキ
    ##     - GG:
    ##       - ガーンジー*, セント・ピーター・ポート
    ##     - IS:
    ##       - アイスランド*, レイキャビク
    ##     - IE:
    ##       - アイルランド*, ダブリン
    ##     - IM:
    ##       - マン島*
    ##     - LV:
    ##       - ラトビア*, リガ
    ##     - LT:
    ##       - リトアニア*, ビリニュス
    ##     - NO:
    ##       - ノルウェー*, オスロ
    ##     - SJ:
    ##       - スヴァールバル・ヤンマイエン諸島*
    ##     - SE:
    ##       - スウェーデン*, ストックホルム
    ##     - GB:
    ##       - 英国*, イギリス*, ロンドン
    ##   - SOUTH:
    ##     - AL:
    ##       - アルバニア*, ティラナ
    ##     - AD:
    ##       - アンドラ*
    ##     - BA:
    ##       - ボスニア*, サラエボ
    ##     - HR:
    ##       - クロアチア*, ザグレブ
    ##     - GI:
    ##       - ジブラルタル*, レニトス
    ##     - GR:
    ##       - ギリシャ*, アテネ
    ##     - VA:
    ##       - バチカン*
    ##     - IT:
    ##       - イタリア*, ローマ
    ##     - MT:
    ##       - マルタ*, バレッタ
    ##     - ME:
    ##       - モンテネグロ*, ポドゴリツカ
    ##     - PT:
    ##       - ポルトガル*, リスボン
    ##     - SM:
    ##       - サンマリノ*
    ##     - RS:
    ##       - セルビア*, ベオグラード
    ##     - SI:
    ##       - スロベニア*, リュブリャナ
    ##     - ES:
    ##       - スペイン*, マドリード, バルセロナ
    ##     - MK:
    ##       - マケドニア*, スコピエ
    ##     - KV:
    ##       - コソボ*, プリスティナ
    ##   - WEST:
    ##     - AT:
    ##       - オーストリア*, ウィーン
    ##     - BE:
    ##       - ベルギー*, ブリュッセル
    ##     - FR:
    ##       - フランス*, パリ
    ##     - DE:
    ##       - ベルリン*, フランクフルト
    ##     - LI:
    ##       - リヒテンシュタイン*, ファドゥーツ
    ##     - LU:
    ##       - ルクセンブルク*
    ##     - MC:
    ##       - モナコ*
    ##     - NL:
    ##       - オランダ*, アムステルダム
    ##     - CH:
    ##       - スイス*, チューリッヒ, ベルン
    ## - OCEANIA:
    ##   - AU-NZ:
    ##     - AU:
    ##       - 豪州*, オーストラリア*, キャンベラ, シドニー
    ##     - NZ:
    ##       - ニュージーランド*, ウェリントン, オークランド
    ##     - NF:
    ##       - ノーフォーク島*
    ##   - MEL:
    ##     - FJ:
    ##       - フィジー*
    ##     - NC:
    ##       - ニューカレドニア*, ヌーメア
    ##     - PG:
    ##       - パプアニューギニア*, ポートモレスビー
    ##     - SB:
    ##       - ソロモン諸島*, ホニアラ
    ##     - VU:
    ##       - バヌアツ*, ポートビラ
    ##   - MIC:
    ##     - GU:
    ##       - グアム*, ハガニア
    ##     - KI:
    ##       - キリバス*, タラワ
    ##     - MH:
    ##       - マーシャル諸島*, マジュロ
    ##     - FM:
    ##       - ミクロネシア*, パルキア
    ##     - NR:
    ##       - ナウル*, ヤレン
    ##     - MP:
    ##       - 北マリアナ諸島*, キャピタルヒル
    ##     - PW:
    ##       - パラオ*, メレケオク
    ##   - POL:
    ##     - AS:
    ##       - 米領サモア*, パゴパゴ
    ##     - CK:
    ##       - クック諸島*, アバルア
    ##     - PF:
    ##       - 仏領ポリネシア*, パペーテ
    ##     - NU:
    ##       - ニウエ*, アロフィ
    ##     - PN:
    ##       - ピトケアン諸島*, アダムスタウン
    ##     - WS:
    ##       - サモア*, アピア
    ##     - TK:
    ##       - トケラウ*, ヌクヌヌ
    ##     - TO:
    ##       - トンガ*, ヌクアロファ
    ##     - TV:
    ##       - ツバル*, フナフティ
    ##     - WF:
    ##       - ウォリス・フツナ諸島*, マタウトゥ

``` r
# 国コードでtokensを作成
toks_country <- tokens_lookup(toks, dict, levels = 3) 
head(toks_country)
```

    ## tokens from 6 documents.
    ## text592027 :
    ## [1] "TH" "TH" "JP"
    ## 
    ## text592028 :
    ##  [1] "KR" "KR" "KR" "JP" "KR" "KR" "KR" "JP" "KR" "KR"
    ## 
    ## text592029 :
    ##  [1] "HK" "JP" "JP" "HK" "JP" "JP" "JP" "JP" "JP" "JP" "JP" "JP" "JP" "JP"
    ## [15] "JP" "JP" "JP"
    ## 
    ## text592030 :
    ##  [1] "US" "US" "JP" "CN" "CN" "US" "US" "CN" "CN" "CN" "US" "JP" "CN" "CN"
    ## [15] "US" "CN" "CN" "JP" "VN" "US" "US" "US" "QA" "US" "US" "US" "CN" "US"
    ## 
    ## text592031 :
    ## [1] "CN" "CN" "CN"
    ## 
    ## text592032 :
    ##  [1] "KR" "KR" "KR" "JP" "KR" "KR" "KR" "KR" "KR" "JP" "JP" "KR"

``` r
# 集計
mx_country <- dfm(toks_country)
county_top <- topfeatures(mx_country)
```

``` r
barplot(county_top)
```

![](tokens_files/figure-markdown_github/plot-1.png)

共起語分析
----------

``` r
# 連続的共起語の抽出
seqs <- sequences(toks, '^[０-９ァ-ヶー一-龠]+$', valuetype = 'regex', 
                  nested = FALSE, min_count = 10, ordered = FALSE)
head(seqs, 20)
```

    ##          collocation   lambda        sigma count         z p
    ## 309289         年 月 54.79911 0.0004610678  2142 118852.61 0
    ## 202556         月 日 54.86423 0.0004807636  2283 114118.93 0
    ## 337272   トランプ 氏 54.71095 0.0005469994  2346 100020.13 0
    ## 52643        昨年 月 53.24528 0.0007286750  1553  73071.37 0
    ## 350445       参院 選 54.60591 0.0008933923  3685  61121.99 0
    ## 129737         約 人 52.47564 0.0008854105  1275  59267.02 0
    ## 166277     オバマ 氏 51.25846 0.0009954795   761  51491.22 0
    ## 149283       具体 的 51.90982 0.0010390696  1120  49957.98 0
    ## 300892       政治 的 51.07331 0.0010250039   726  49827.43 0
    ## 83828  クリントン 氏 50.94490 0.0010442404   682  48786.56 0
    ## 265652     日本 政府 52.06163 0.0010833573  1255  48055.83 0
    ## 313471       積極 的 51.04213 0.0012012246   839  42491.75 0
    ## 264901       今年 月 50.89148 0.0012828074   847  39671.95 0
    ## 118361       外国 人 50.22416 0.0013258140   611  37881.76 0
    ## 44358          自 民 51.37491 0.0013666489  1120  37591.89 0
    ## 139348       関係 者 50.88136 0.0013576924   871  37476.36 0
    ## 154208       舛添 氏 49.52745 0.0013333808   429  37144.26 0
    ## 9512           日 米 49.12813 0.0013313984   369  36899.64 0
    ## 299790         万 円 51.22105 0.0013901133  1063  36846.67 0
    ## 76291          朴 氏 49.39538 0.0013642105   411  36208.04 0

``` r
# 共起語の結合
toks_comp <- tokens_compound(toks, seqs[seqs$p < 0.01,], valuetype = 'fixed', 
                             concatenator = '', join = TRUE)

head(kwic(toks, "トランプ*")) # 結合前
```

    ##                                                        
    ##  [text592038, 306]             放言 続ける | トランプ |
    ##  [text592039, 367]          党 トップ 走る | トランプ |
    ##  [text592039, 426]             過激派 右翼 | トランプ |
    ##  [text592094, 292] 乏しい 実業 家 ドナルド | トランプ |
    ##  [text592094, 373]      下がる 逆に 上がる | トランプ |
    ##  [text592094, 411]                 影響 大 | トランプ |
    ##                         
    ##  氏 人気 衰え           
    ##  氏 メキシコ 移民       
    ##  氏 敵 戦               
    ##  氏 支持 率             
    ##  氏 当選 可能性         
    ##  氏 に関する 話題 大統領

``` r
head(kwic(toks_comp, "トランプ*")) # 結合後
```

    ##                                                               
    ##  [text592038, 270]                  放言 続ける | トランプ氏 |
    ##  [text592039, 325]           共和党 トップ 走る | トランプ氏 |
    ##  [text592039, 380]                  過激派 右翼 | トランプ氏 |
    ##  [text592094, 331]           下がる 逆に 上がる | トランプ氏 |
    ##  [text592094, 367]                      影響 大 | トランプ氏 |
    ##   [text592329, 28] 共和党候補指名 争い 不動産王 | トランプ氏 |
    ##                            
    ##   人気 衰え                
    ##   メキシコ移民 イスラム教徒
    ##   敵 戦                    
    ##   当選 可能性              
    ##  に関する 話題 大統領選    
    ##   優位 立
